/**
 * This header is generated by class-dump-z 0.2-1.
 * class-dump-z is Copyright (C) 2009 by KennyTM~, licensed under GPLv3.
 *
 * Source: /System/Library/PrivateFrameworks/Message.framework/Message
 */

#import "Message-Structs.h"
#import <MIME/MessageStore.h>
#import "MailMessageStore.h"

@class ActivityMonitor, NSMutableArray, NSTimer, MailAccount, MailboxUid;

@interface MailMessageStore : MessageStore {
	struct {
		unsigned isReadOnly : 1;
		unsigned hasUnsavedChangesToMessageData : 1;
		unsigned haveOpenLockFile : 1;
		unsigned rebuildingTOC : 1;
		unsigned compacting : 1;
		unsigned cancelInvalidation : 1;
		unsigned forceInvalidation : 1;
		unsigned isWritingChangesToDisk : 1;
		unsigned isTryingToClose : 1;
		unsigned compactOnClose : 1;
		unsigned reserved : 22;
	} _flags;
	MailboxUid* _mailboxUid;
	MailAccount* _account;
	NSMutableArray* _allMessages;
	unsigned _allMessagesSize;
	unsigned _deletedMessagesSize;
	unsigned _deletedMessageCount;
	unsigned _unreadMessageCount;
	unsigned _lastFetchCount;
	unsigned _generationNumber;
	int _state;
	NSTimer* _timer;
	double timeOfLastAutosaveOperation;
	ActivityMonitor* _openMonitor;
}
+(BOOL)createEmptyStoreIfNeededForPath:(id)path;
+(BOOL)createEmptyStoreForPath:(id)path;
+(BOOL)storeAtPathIsWritable:(id)pathIsWritable;
+(BOOL)cheapStoreAtPathIsEmpty:(id)pathIsEmpty;
// inherited: +(Class)classForMimePart;
+(int)copyMessages:(id)messages toMailbox:(id)mailbox markAsRead:(BOOL)read deleteOriginals:(BOOL)originals isDeletion:(BOOL)deletion unsuccessfulOnes:(id)ones;
-(instancetype)initWithMailboxUid:(id)mailboxUid readOnly:(BOOL)only;
// inherited: -(void)dealloc;
-(void)openAsynchronously;
-(void)openSynchronously;
-(void)didOpen;
-(void)cancelOpen;
-(void)writeUpdatedMessageDataToDisk;
-(MailAccount*)account;
-(MailboxUid*)mailboxUid;
-(BOOL)isOpened;
-(id)storePathRelativeToAccount;
-(NSString*)displayName;
-(const char*)displayNameForLogging;
-(BOOL)isReadOnly;
// inherited: -(id)description;
-(BOOL)isTrash;
-(BOOL)isDrafts;
-(void)messageFlagsDidChange:(id)messageFlags flags:(id)flags;
-(void)structureDidChange;
-(void)messagesWereAdded:(id)added;
-(void)messagesWereCompacted:(id)compacted;
-(void)updateUserInfoToLatestValues;
-(unsigned)totalMessageSize;
-(void)deletedCount:(unsigned*)count andSize:(unsigned*)size;
-(unsigned)totalCount;
-(unsigned)nonDeletedCount;
-(unsigned)serverMessageCount;
-(unsigned)serverUnreadOnlyOnServerCount;
-(unsigned)serverUnreadCount;
-(BOOL)hasMoreMessages:(unsigned)messages;
-(void)purgeMessagesBeyond:(unsigned)beyond;
-(unsigned)unreadCount;
-(BOOL)hasMessageForAccount:(id)account;
-(unsigned)indexOfMessage:(id)message;
-(NSArray*)copyOfAllMessages;	// array of LibraryMessages
-(id)copyOfMessagesInRange:(NSRange)range;
-(id)mutableCopyOfAllMessages;
-(id)copyOfAllMessagesWithOptions:(unsigned)options;
-(id)copyOfAllMessagesForBodyLoadingFromRowID:(unsigned)rowID limit:(unsigned)limit;
-(id)copyMessagesMatchingText:(id)text;
-(id)copyMessagesMatchingText:(id)text options:(unsigned)options;
-(id)copyMessagesMatchingCriterion:(id)criterion options:(unsigned)options;
-(BOOL)canFetchSearchResults;
-(int)fetchMessagesMatchingCriterion:(id)criterion limit:(unsigned)limit;
-(id)_defaultRouterDestination;
-(id)finishRoutingMessages:(id)messages routed:(id)routed;
-(BOOL)canRebuild;
-(void)rebuildTableOfContentsAsynchronously;
-(BOOL)canCompact;
-(void)doCompact;
-(void)deleteMessagesOlderThanNumberOfDays:(int)days compact:(BOOL)compact;
-(void)deleteMessages:(id)messages moveToTrash:(BOOL)trash;
-(void)undeleteMessages:(id)messages;
-(void)messagesWereDeleted:(id)deleted;
-(BOOL)allowsAppend;
-(int)appendMessages:(id)messages unsuccessfulOnes:(id)ones newMessageIDs:(id)ids newMessages:(id)messages4 flagsToSet:(id)set;
-(int)appendMessages:(id)messages unsuccessfulOnes:(id)ones newMessageIDs:(id)ids newMessages:(id)messages4;
-(int)appendMessages:(id)messages unsuccessfulOnes:(id)ones newMessageIDs:(id)ids;
-(int)appendMessages:(id)messages unsuccessfulOnes:(id)ones;
-(id)messageWithValue:(id)value forHeader:(id)header options:(unsigned)options;
-(id)messageForMessageID:(id)messageID;
-(id)messageForRemoteID:(id)remoteID;
// inherited: -(id)headerDataForMessage:(id)message downloadIfNecessary:(BOOL)necessary;
-(BOOL)hasCachedDataForMimePart:(id)mimePart;
-(id)setFlagsFromDictionary:(id)dictionary forMessages:(id)messages;
-(id)setFlagsFromDictionary:(id)dictionary forMessage:(id)message;
-(void)setFlag:(id)flag state:(BOOL)state forMessages:(id)messages;
-(id)willSetFlagsFromDictionary:(id)dictionary forMessages:(id)messages;
-(void)setFlagsCancelled:(id)cancelled forMessages:(id)messages;
-(void)startSynchronization;
// inherited: -(void)setNumberOfAttachments:(unsigned)attachments isSigned:(BOOL)aSigned isEncrypted:(BOOL)encrypted forMessage:(id)message;
-(id)status;
-(int)fetchSynchronously;
-(int)fetchNewMessagesAndSynchronizeOldMessages:(BOOL)messages;
-(int)fetchMessagesReceivedBetween:(id)between and:(id)anAnd synchronize:(BOOL)synchronize;
-(int)fetchNumMessages:(unsigned)messages preservingUID:(id)uid beforeUID:(unsigned)uid3 synchronize:(BOOL)synchronize compact:(BOOL)compact;
-(int)fetchNumMessages:(unsigned)messages beforeUID:(unsigned)uid synchronize:(BOOL)synchronize;
-(int)fetchMobileSynchronously:(unsigned)synchronously preservingUID:(id)uid compact:(BOOL)compact;
-(int)fetchMobileSynchronously:(unsigned)synchronously;
-(void)syncOlderMessages;
-(BOOL)setPreferredEncoding:(unsigned long)encoding forMessage:(id)message;
-(void)setData:(id)data forMimePart:(id)mimePart isComplete:(BOOL)complete;
-(void)close;
// inherited: -(void)_flushAllMessageData;
-(void)setLibrary:(id)library;
-(BOOL)shouldDownloadBodyDataForMessage:(id)message;
-(id)loadMeetingExternalIDForMessage:(id)message;
-(id)loadMeetingDataForMessage:(id)message;
-(BOOL)shouldSetSummaryForMessage:(id)message;
-(BOOL)canDeleteMessage:(id)message;
@end

@interface MailMessageStore (MessageFrameworkOnly)
+(void)_autosaveMessageStore:(void*)store;
// inherited: +(Class)headersClass;
-(void)_cancelAutosave;
-(void)_setNeedsAutosave;
-(id)_fetchHeaderDataForMessage:(id)message downloadIfNecessary:(BOOL)necessary;
-(void)_rebuildTableOfContentsSynchronously;
-(void)updateBodyFlagsForMessage:(id)message body:(id)body;
// inherited: -(id)_setOrGetBody:(id)body forMessage:(id)message updateFlags:(BOOL)flags;
-(void)_setFlagsForMessages:(id)messages mask:(unsigned long)mask;
-(void)_setFlagsAndColorForMessages:(id)messages;
-(void)updateMessages:(id)messages updateColor:(BOOL)color updateNumberOfAttachments:(BOOL)attachments;
-(void)messagesWereAdded:(id)added forIncrementalLoading:(BOOL)incrementalLoading;
-(BOOL)_updateFlagForMessage:(id)message key:(id)key value:(BOOL)value;
-(BOOL)_shouldChangeComponentMessageFlags;
-(BOOL)_shouldChangeComponentMessageFlagsForMessage:(id)message;
@end

